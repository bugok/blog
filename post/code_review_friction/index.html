<!doctype html><html class=no-js lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#1b1b1b"><title>Reduce friction of getting your code reviewed | Noam Lerner's Blog</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="Several tips on how to get your code reviewed with less friction"><meta property="og:title" content="Reduce friction of getting your code reviewed"><meta property="og:description" content="Several tips on how to get your code reviewed with less friction"><meta property="og:type" content="article"><meta property="og:url" content="https://www.noamlerner.com/post/code_review_friction/"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-03-11T07:57:30+02:00"><meta property="article:modified_time" content="2023-03-11T07:57:30+02:00"><meta itemprop=name content="Reduce friction of getting your code reviewed"><meta itemprop=description content="Several tips on how to get your code reviewed with less friction"><meta itemprop=datePublished content="2023-03-11T07:57:30+02:00"><meta itemprop=dateModified content="2023-03-11T07:57:30+02:00"><meta itemprop=wordCount content="1045"><meta itemprop=keywords content="codereview,productivity,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Reduce friction of getting your code reviewed"><meta name=twitter:description content="Several tips on how to get your code reviewed with less friction"><link rel=stylesheet href=https://www.noamlerner.com/css/bundle.css><link rel=stylesheet href=https://www.noamlerner.com/css/custom.css><link rel=icon href=https://www.noamlerner.com/icons/16.png sizes=16x16 type=image/png><link rel=icon href=https://www.noamlerner.com/icons/32.png sizes=32x32 type=image/png><link rel=manifest href=https://www.noamlerner.com/manifest.json><script async src="https://www.googletagmanager.com/gtag/js?id=G-4VW03XLR18"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4VW03XLR18",{anonymize_ip:!1})}</script></head><body class="body kind-page"><header class=header><a class=logo href=https://www.noamlerner.com/>Noam Lerner's Blog</a><nav class="main-nav main-nav--right" role=navigation><button id=toggle class=main-nav__btn aria-label="Menu toggle" aria-expanded=false tabindex=0><div class=main-nav__btn-box tabindex=-1><svg class="main-nav__icon icon-menu" width="18" height="18" viewBox="0 0 18 18"><path class="icon-menu__burger" d="M18 0v3.6H0V0h18zM0 10.8h18V7.2H0v3.6zM0 18h18v-3.6H0V18z"/><path class="icon-menu__x" d="M11.55 9 18 15.45 15.45 18 9 11.55 2.55 18 0 15.45 6.45 9 0 2.55 2.55.0 9 6.45 15.45.0 18 2.55 11.55 9z"/></svg></div></button><ul id=menu class=main-nav__list><li class=main-nav__item><a class=main-nav__link href=https://www.noamlerner.com/about/><span class=main-nav__text>About</span></a></li><li class=main-nav__item><a class=main-nav__link href=https://www.noamlerner.com/whoami/><span class=main-nav__text>Whoami</span></a></li></ul></nav></header><div class=primary><main class=main><nav class="breadcrumb block" aria-label=breadcrumb><ol class=breadcrumb__list><li class=breadcrumb__item><a class=breadcrumbs__link href=https://www.noamlerner.com/>Home</a></li><li class=breadcrumb__item><a class=breadcrumbs__link href=https://www.noamlerner.com/post/>Posts</a></li><li class="breadcrumbs__item breadcrumb__item--active" aria-current=page>Reduce friction of getting your code reviewed</li></ol></nav><div class="single block"><article class=entry><div class="entry__meta meta mb"><time class="entry__meta-published meta-published" datetime=2023-03-11T07:57:30+02:00>March 11, 2023</time><div class="entry__meta-tags meta-tags"><span class=meta-tags__list>Tags:
<a class=meta-tags__link href=https://www.noamlerner.com/tags/codereview/ rel=tag>codereview</a>,
<a class=meta-tags__link href=https://www.noamlerner.com/tags/productivity/ rel=tag>productivity</a></span></div></div><h1 class=entry__title>Reduce friction of getting your code reviewed</h1><div class=entry__content><p>There&rsquo;s this saying:</p><blockquote><p>Always code as if the guy who ends up maintaining your code will be a violent psychopath who knows where you live. Code for readability.</p></blockquote><p>(According to <a href=https://stackoverflow.com/a/878436>Stack Overflow</a>, this first was said by John Woods)</p><p>Thinking about this from another angle - what if that same person is the one who needs to approve your code?</p><p>In this post, I&rsquo;ll try and go over some of my suggestions on how to reduce the friction of getting your code approved by your code reviewers.</p><h2 id=high-level>High level</h2><p>At high level, put yourself in your reviewer&rsquo;s position, and think about what would make them approve your code changes. If you were the reviewer, what would make you approve the code changes? My answer is: make the reviewer understand what you&rsquo;ve done, why you&rsquo;ve done it and also convince the reviewer that you&rsquo;re verified the correctness of your changes.</p><h2 id=concrete-suggestions>Concrete suggestions</h2><h3 id=explicit-ground-rules>Explicit ground rules</h3><p>Ideally, before a single line of code is written, there should be clear contribution rules. This is well-integrated within <a href=https://docs.github.com/en/communities/setting-up-your-project-for-healthy-contributions/setting-guidelines-for-repository-contributors>GitHub repos</a>. That allows the repo maintainers to clearly communicate to present and future contributors how to add, remove or modify code on the repo. Ideally, those rules should be verified using automation in CI.</p><p><strong>Benefits</strong>: clarity and automated-verification for all changes in the repository.</p><h3 id=format-your-code-according-to-a-well-defined-code-style>Format your code according to a well-defined code-style</h3><p>A few years ago I was working on a project which was going to be open sourced (and it <a href=https://github.com/facebook/proxygen>eventually did</a>). We discussed the code-formatting options for it. I remember saying: &ldquo;I don&rsquo;t care which format we use, I just want it to be defined&rdquo;. It doesn&rsquo;t really matter if the curly brackets are in the same line as the <code>if</code> statement or in a new line. What matters is that we shouldn&rsquo;t waste time debating on the matter.</p><p>From the author&rsquo;s point of view - make sure that your code answers to the code style. For example, for Python code, I use <a href=https://black.readthedocs.io/en/stable/>black</a>. In Go, there&rsquo;s <a href=https://pkg.go.dev/cmd/gofmt>gofmt</a> which is built-in the language. The argument holds for any language: pick a code-style, and stick with it.</p><p><strong>Code review time saving benefit</strong>: Not wasting time and effort discussing code style issues.</p><h3 id=make-sure-your-code-passes-static-analysis>Make sure your code passes static analysis</h3><p>If your repository has some static analysis enforced, make sure your code passes those analysis tests. If possible, run those tests locally before submitting the code changes. As a reviewer, I always request for changes when some automation fails static anlysis. As an author, I make sure that my code passes static analysis before I have someone else look at it.</p><p><strong>Code review time saving benefit</strong>: Best practices and past-learnings are incorporated into your code ahead of code review time.</p><h3 id=keep-test-signal-green>Keep test signal green</h3><p>Tests are a great way to verify that your code is doing what it&rsquo;s supposed to do. When making changes to code you want to make sure the test signal is kept at a high quality. This means:</p><ul><li>If the behavior isn&rsquo;t expected to change - make sure that the tests still pass.</li><li>If the behavior is expected to change - modify the tests to reflect that. This means possibly <strong>removing</strong> existing tests, or <strong>adding</strong> new ones.</li></ul><p>Changing the tests based on your changes makes sure that future changes won&rsquo;t break your desired behavior. As an author, I want to be in a place where tests prevent me from breaking the code. Therefore, I want to make sure they evolve the same way the code evolves.</p><p><strong>Code review time saving benefit</strong>: No additional iteration is needed for breaking desired behavior.</p><h3 id=clear-title-and-description>Clear title and description</h3><p>Up until now I have shared concepts related to the code itself. Now, let&rsquo;s talk a little about the surroundings: Write a clear title and description to your code changes.</p><p>Concisely explain <strong>what</strong> you are doing in the title. This will allow the reviewer to easily understand what this code-change is going to be about. It also helps when looking at the history of your repository when investigating past changes.</p><p>Explain <strong>why</strong> you&rsquo;re making the code change in the description. Context matters. Whereas a code-change makes sense in terms of functionality - it may not be necessary in the grand scheme of things. What&rsquo;s the high-level goal? What initiative is this change part of? What future changes will come after this code change?</p><p><strong>Code review time saving benefit</strong>: Reviewer doesn&rsquo;t ask questions about why the code changes are done.</p><h3 id=solid-test-plan>Solid test plan</h3><p>As a reviewer, I want to make sure the author made sure that the suggested changes have been properly tested. Having CI pass is table stakes. In most cases, as a reviewer, I&rsquo;d expect more. For example:</p><ul><li>Screenshots of before and after the changes</li><li>Canary the changes in a staging tier (or maybe production) with a graph which shows that behavior has been verified.</li><li>Running the relevant changes locally, supply the output before and after</li></ul><p><strong>Code review time saving benefit</strong>: Reviewer doesn&rsquo;t question the correctness of the changes.</p><h3 id=small-changes-and-stack-commits>Small changes and stack commits</h3><p>This is a very common pattern at Meta. Authors are encouraged to submit changes in small chunks, in a stacked manner. This makes both authoring and reviewing code much easier. It&rsquo;s easier to write and review three code changes of 100 lines each compared to one change of 300 lines. Those smaller changes can be more easily tested, isolated - and if needed - reverted.</p><p>Frankly, I haven&rsquo;t practiced this before working at <del>Facebook</del> Meta, so I&rsquo;m not sure what tooling allows this outside of Meta. But, <a href=https://engineering.fb.com/2022/11/15/open-source/sapling-source-control-scalable/>sapling</a> was recently released to the public to make this approach available using GitHub. You can see this <a href=https://reviewstack.dev/bolinfest/monaco-tm/pull/39>reviewstack example</a> to get a glimpse.</p><p><strong>Code review time saving benefit:</strong> Time author spent when reviewing smaller code changes is shorter.</p><h2 id=summary>Summary</h2><p>Mark Twain said:</p><blockquote><p>“I didn&rsquo;t have time to write a short letter, so I wrote a long one instead.”</p></blockquote><p>My point in this post is kind of reversed to the quote. If you invest time in your code changes, it would make them easier to review. Take the time to write a shorter change. Format the code, explain the rationale, and properly test your change. You&rsquo;ll get a faster, better code review, and you&rsquo;ll keep your repository at a high quality bar.</p></div><footer class=entry__footer><div class=entry__tags><a class="entry__tag btn" href=https://www.noamlerner.com/tags/codereview/>codereview</a>
<a class="entry__tag btn" href=https://www.noamlerner.com/tags/productivity/>productivity</a></div><div class="entry__share share"><a class="share__link btn" title="Share on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.noamlerner.com%2fpost%2fcode_review_friction%2f" target=_blank rel="noopener noreferrer" onclick='return window.open(this.href,"Share on Facebook","width=800,height=600,toolbar=0,status=0"),!1'><svg class="share__icon" aria-label="Facebook" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M330 512V322h64l9-74h-73v-47c0-22 6-36 37-36h39V99c-7-1-30-3-57-3-57 0-95 34-95 98v54h-64v74h64v190z"/></svg></a><a class="share__link btn" title="Share on LinkedIn" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fwww.noamlerner.com%2fpost%2fcode_review_friction%2f&title=Reduce%20friction%20of%20getting%20your%20code%20reviewed" target=_blank rel="noopener noreferrer" onclick='return window.open(this.href,"Share on LinkedIn","width=640,height=480,toolbar=0,status=0"),!1'><svg class="share__icon" aria-label="LinkedIn" role="img" width="32" height="32" viewBox="0 0 512 512"><circle cx="142" cy="138" r="37"/><path stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg></a></div></footer></article></div></main><script src=https://utteranc.es/client.js repo=bugok/blog issue-term=pathname label=utterances theme=github-dark-orange crossorigin=anonymous async></script></div><footer class=footer><div class="footer__social social"><a class=social__link target=_blank rel="noopener noreferrer" href=https://www.facebook.com/bugok><svg class="social__icon" aria-label="Facebook" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M330 512V322h64l9-74h-73v-47c0-22 6-36 37-36h39V99c-7-1-30-3-57-3-57 0-95 34-95 98v54h-64v74h64v190z"/></svg></a><a class=social__link target=_blank rel="noopener noreferrer" href=https://linkedin.com/in/noamler><svg class="social__icon" aria-label="LinkedIn" role="img" width="32" height="32" viewBox="0 0 512 512"><circle cx="142" cy="138" r="37"/><path stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg></a><a class=social__link target=_blank rel="noopener noreferrer" href=https://github.com/bugok><svg class="social__icon" aria-label="Github" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg></a></div><div class=footer__copyright>© 2023 Noam Lerner's Blog. <span class=footer__copyright-credits>Powered by <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/vimux/binario rel="nofollow noopener" target=_blank>Binario</a> theme.</span></div></footer><script src=https://www.noamlerner.com/js/menu.js></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
<script src=https://www.noamlerner.com/js/custom.js></script></body></html>